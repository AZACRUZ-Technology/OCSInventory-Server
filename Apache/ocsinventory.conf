################################################################################
#
# OCS Inventory NG Communication Server Perl Module Setup
#
# Copyleft 2006 Pascal DANEK
# Web: http://ocsinventory.sourceforge.net
#
# This code is open source and may be copied and modified as long as the source
# code is always made freely available.
# Please refer to the General Public Licence http://www.gnu.org/ or Licence.txt
################################################################################

# Which version of mod_perl we are using
# For mod_perl <= 1.999_21, replace VERSION_MP by 1
# For mod_perl > 1.999_21, replace VERSION_MP by 2
PerlSetEnv OCS_MODPERL_VERSION VERSION_MP

# Where to write detailled logs
PerlSetEnv OCS_LOGPATH "PATH_TO_LOG_DIRECTORY"

# Database options
# Replace DATABASE_SERVER by hostname or ip of MySQL server, generally localhost
PerlSetEnv OCS_DB_HOST DATABASE_SERVER
# Replace DATABASE_PORT by port where running MySQL server, generally 3306
PerlSetEnv OCS_DB_PORT DATABASE_PORT
# Name of database
PerlSetEnv OCS_DB_NAME ocsweb
PerlSetEnv OCS_DB_LOCAL ocsweb
# User allowed to connect to database
PerlSetEnv OCS_DB_USER ocs
# Password for user
PerlSetVar OCS_DB_PWD ocs
# If you need to specify a mysql socket that the client's built-in
#PerlSetVar OCS_OPT_DBI_MYSQL_SOCKET "path/to/mysql/unix/socket"

# Some options below are overloaded if you are using ocs GUI
# Be careful: you must restart apache to make settings taking effects
PerlSetEnv OCS_OPT_FREQUENCY 0
PerlSetEnv OCS_OPT_PROLOG_FREQ 24
PerlSetEnv OCS_OPT_DEPLOY 1
PerlSetEnv OCS_OPT_TRACE_DELETED 0
PerlSetEnv OCS_OPT_AUTO_DUPLICATE_LVL 7
PerlSetEnv OCS_OPT_LOGLEVEL 0
PerlSetEnv OCS_OPT_INVENTORY_DIFF 1
PerlSetEnv OCS_OPT_INVENTORY_TRANSACTION 1
PerlSetEnv OCS_OPT_INVENTORY_CACHE_ENABLED 1
PerlSetEnv OCS_OPT_INVENTORY_CACHE_REVALIDATE 86400
PerlSetEnv OCS_OPT_INVENTORY_FILTER 1
PerlSetEnv OCS_OPT_PROXY_REVALIDATE_DELAY 3600
PerlSetEnv OCS_OPT_LOCK_REUSE_TIME 3600
PerlSetEnv OCS_OPT_ENABLE_GROUPS 1
PerlSetEnv OCS_OPT_GROUPS_CACHE_REVALIDATE 43200
PerlSetEnv OCS_OPT_GROUPS_CACHE_OFFSET 43200
PerlSetEnv OCS_OPT_DBI_PRINT_ERROR 0
PerlSetEnv OCS_OPT_WEB_SERVICE_ENABLED 0
PerlSetEnv OCS_OPT_GENERATE_OCS_FILES 0
PerlSetEnv OCS_OPT_OCS_FILES_OVERWRITE 0
PerlSetEnv OCS_OPT_OCS_FILES_PATH "/tmp"
PerlSetEnv OCS_OPT_OCS_FILES_FORMAT "OCS"
PerlSetEnv OCS_OPT_SECURITY_LEVEL 0

# If you are using a multi server architecture, 
# Put the ip addresses of the slaves on the master
# (This is read as perl regular expressions)
PerlAddVar OCS_OPT_TRUSTED_IP 127.0.0.1
#PerlAddVar OCS_OPT_TRUSTED_IP XXX.XXX.XXX.XXX

PerlSetEnv OCS_OPT_IPDISCOVER 2
PerlSetEnv OCS_OPT_IPDISCOVER_MAX_ALIVE 7
PerlSetEnv OCS_OPT_IPDISCOVER_BETTER_THRESHOLD 1
PerlSetEnv OCS_OPT_IPDISCOVER_LATENCY 100
PerlSetEnv OCS_OPT_IPDISCOVER_USE_GROUPS 1
PerlSetEnv OCS_OPT_IPDISCOVER_NO_POSTPONE 0
PerlSetEnv OCS_OPT_REGISTRY 0
PerlSetEnv OCS_OPT_UPDATE 0
PerlSetEnv OCS_OPT_DOWNLOAD 0
PerlSetEnv OCS_OPT_DOWNLOAD_FRAG_LATENCY 10
PerlSetEnv OCS_OPT_DOWNLOAD_CYCLE_LATENCY 0
PerlSetEnv OCS_OPT_DOWNLOAD_PERIOD_LATENCY 0
PerlSetEnv OCS_OPT_DOWNLOAD_TIMEOUT 30
PerlSetEnv OCS_OPT_DOWNLOAD_GROUPS_TRACE_EVENTS 0
PerlSetEnv OCS_OPT_PROLOG_FILTER_ON 1
PerlSetEnv OCS_OPT_INVENTORY_FILTER_ON 1
PerlSetEnv OCS_OPT_INVENTORY_FILTER_FLOOD_IP 1
PerlSetEnv OCS_OPT_INVENTORY_FILTER_FLOOD_IP_CACHE_TIME 60

############ DO NOT MODIFY BELOW ! #######################

# External modules
PerlModule Apache::DBI
PerlModule Compress::Zlib
PerlModule XML::Simple

# Ocs
PerlModule Apache::Ocsinventory
PerlModule Apache::Ocsinventory::Server::Constants
PerlModule Apache::Ocsinventory::Server::System
PerlModule Apache::Ocsinventory::Server::Communication
PerlModule Apache::Ocsinventory::Server::Inventory
PerlModule Apache::Ocsinventory::Server::Duplicate

# Options
PerlModule Apache::Ocsinventory::Server::Option::Registry
PerlModule Apache::Ocsinventory::Server::Option::Update
PerlModule Apache::Ocsinventory::Server::Option::Ipdiscover
PerlModule Apache::Ocsinventory::Server::Option::Download
# This module guides you through the module creation
# PerlModule Apache::Ocsinventory::Server::Option::Example
# This module adds some rules to filter some request sent to ocs server in the prolog and inventory stages
# PerlModule Apache::Ocsinventory::Server::Option::Filter

# Virtual directory for handling OCS Inventory NG agents communications
# Be careful, do not create such directory into your web server root document !
# PerlTaintCheck On

# SSL apache settings 
#SSLEngine "SSL_ENABLE"
#SSLCertificateFile "SSL_CERTIFICATE_FILE"
#SSLCertificateKeyFile "SSL_CERTIFICATE_KEY_FILE"
#SSLCACertificateFile "SSL_CERTIFICATE_FILE"
#SSLCACertificatePath "SSL_CERTIFICATE_PATH"
#SSLVerifyClient "SSL_VALIDATE_CLIENT"

# Engine apache settings
<Location /ocsinventory>
	order deny,allow
	allow from all
	Satisfy Any
        SetHandler perl-script
        PerlHandler Apache::Ocsinventory
</Location>

# Web service apache settings
PerlModule Apache::Ocsinventory::SOAP
<location /ocsinterface>
        SetHandler perl-script
        PerlHandler "Apache::Ocsinventory::SOAP"
        Order deny,allow
        Allow from all
        Satisfy any
</location>

